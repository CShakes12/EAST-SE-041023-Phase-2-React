<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">

  <title>05_sidefx_fetching</title>

  <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
  <meta name="author" content="Hakim El Hattab">

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="libs/reveal.js/4.3.1/reset.css">
  <link rel="stylesheet" href="libs/reveal.js/4.3.1/reveal.css">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

  <!-- highlight Theme -->
  
  <link rel="stylesheet" href="libs/highlight.js/11.3.1/styles/monokai.min.css">
  
	
		
	<link rel="stylesheet" href="libs/reveal.js/4.3.1/plugin/chalkboard/style.css">
	
	
	
  <link rel="stylesheet" href="libs/reveal.js/4.3.1/plugin/customcontrols/style.css">
  
	



  <!-- Revealjs Theme -->
  
  <link rel="stylesheet" href="libs/reveal.js/4.3.1/theme/black.css" id="theme">
  
  

  <link rel="stylesheet" href="libs/styles/tasklist.css">
	<link rel="stylesheet" href="libs/styles/iota.css">
	<link rel="stylesheet" href="libs/styles/layout.css">


  <!-- Revealjs Theme -->
  

   <!-- css list -->
	

   

</head>

<body>

   

  <div class="reveal">

    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">

      


    
        <section >
            
            <h2>Side Effects and Data Fetching üíª</h2>

            </section>
    



    
        <section >
            
            <h2>‚úÖ Objectives</h2>
<ul>
<li>
<p>Use the useEffect hook to fetch data</p>
</li>
<li>
<p>Understand Component side effects</p>
</li>
</ul>

            </section>
    



    
        <section >
            
            <h2>What to know before discussing side effects?</h2>
<br>
<p>React components are ‚Äòpure functions‚Äô. This means that given an input (such as a prop), the return is 100% predictable</p>
<br>
<pre><code class="language-js">const Greeting = ({ name }) =&gt; {
  return &lt;h1&gt; Hello, {name} &lt;/h1&gt;;
};

export default Greeting;
</code></pre>
<br>
<p>Any time Greeting is called, and provided a new prop, we will always be able to predict the output, regardless of the prop value</p>
<br>
            </section>
    



    
        <section >
            
            <h2>What is a side effect?</h2>
<br>
<p>‚ÄúWe perform a side effect when we need to reach outside of our React components to do something. Performing a side effect, however, will not give us a predictable result.‚Äù</p>
<p><a href="https://www.freecodecamp.org/news/react-useeffect-absolute-beginners/">https://www.freecodecamp.org/news/react-useeffect-absolute-beginners/</a></p>
<br>
<p>The term ‚Äòside effect‚Äô not only applies to React but to all functional programming.</p>
<br>
<p>‚ÄúA side effect is anything that affects something outside the scope of the function being executed ‚Äù - Michael W. Brady</p>
<br>
<p>üí° These are operations that will still affect our component but can‚Äôt specifically happen during the rendering</p>
<br>
            </section>
    



    
        <section >
            
            <h2>Examples of React component side effects</h2>
<br>
<ul>
<li>
<p>Fetching Data from a server</p>
</li>
<li>
<p>Interacting with a browsers API like the <code>document</code> or <code>window</code></p>
</li>
<li>
<p>Utilizing interval timers such as <code>setInterval</code> or <code>setTimeout</code></p>
</li>
</ul>

            </section>
    



    
        <section >
            
            <h2>üõ†Ô∏è useEffect() hook</h2>
<br>
<ul>
<li><code>useEffect()</code> runs both upon the first render and then with every re-render after but only based on the rules set inside the dependency array</li>
</ul>
<br>
<ul>
<li>
<p>Takes in two arguments:</p>
<ul>
<li>
<p>A callback function defining the logic to be executed as a side effect(the ‚Äòeffect‚Äô)</p>
</li>
<li>
<p>A dependency array that defines when the side effect should occur. This argument is optional and does not always need to be provided</p>
</li>
</ul>
</li>
</ul>
<br>
<ul>
<li><code>useEffect()</code> is essentially telling React that the component needs to do something else AFTER the component has rendered</li>
</ul>

            </section>
    



    
        <section >
            
            <h2>1Ô∏è‚É£ useEffect() hook without a dependency array</h2>
<br>
<pre><code class="language-js">useEffect(() =&gt; {
  // Some effect to occur
});
</code></pre>
<br>
<ul>
<li>
<p>In this example, only 1 argument is passed to useEffect</p>
</li>
<li>
<p>The dependency array which is the optional second argument is left out</p>
</li>
<li>
<p>That means that upon every render and re-render, this side effect will also execute</p>
</li>
</ul>

            </section>
    



    
        <section >
            
            <h2>2Ô∏è‚É£ useEffect() hook with an empty dependency array</h2>
<br>
<pre><code class="language-js">useEffect(() =&gt; {
  // Some effect to occur
}, []);
</code></pre>
<br>
<ul>
<li>
<p>In this example, the dependency array is passed as the second argument</p>
</li>
<li>
<p>The dependency array is empty with no provided value</p>
</li>
<li>
<p>That means that the side effect will only run one time, upon the initial render of the component and no more after that. Even if the component is re-rendered</p>
</li>
</ul>

            </section>
    



    
        <section >
            
            <h2>3Ô∏è‚É£ useEffect() hook with a value provided to the dependency array</h2>
<br>
<pre><code class="language-js">useEffect(() =&gt; {
  // Some effect to occur
}, [data]);
</code></pre>
<br>
<ul>
<li>
<p>In this example, the dependency array is passed a piece of data. This data can be either a prop or a state variable</p>
</li>
<li>
<p>That means that the side effect will run once upon the components initial render and then only re-run when the value of the provided data changes</p>
</li>
</ul>

            </section>
    



    
        <section >
            
            <h2>Fixing App component with useEffect</h2>
<br>
<p>üõë Current problem: To load all the projects into the Project showcase application, a user must click on the ‚Äòload projects‚Äô button</p>
<br>
<p>üëç Solution: Perform a side effect that will fetch the projects from the API and set the <code>projects</code> state to the response from the request</p>
<br>
<pre><code class="language-js">useEffect(() =&gt; {
  fetch(&quot;http://localhost:4000/projects&quot;)
    .then((res) =&gt; res.json())
    .then((projects) =&gt; setProjects(projects));
}, []);
</code></pre>

            </section>
    



    
        <section >
            
            <h2>üî∫ Common Mistakes with useEffect</h2>
<br>
<p>‚ùó Why are we not including <code>projects</code> like:</p>
<p>What happens here?</p>
<br>
<pre><code class="language-js">useEffect(() =&gt; {
  fetch(&quot;http://localhost:4000/projects&quot;)
    .then((res) =&gt; res.json())
    .then((projects) =&gt; setProjects(projects));
}, [projects]);
</code></pre>
<br>
<p>‚ùìor here?</p>
<pre><code class="language-js">useEffect(() =&gt; {
  fetch(&quot;http://localhost:4000/projects&quot;)
    .then((res) =&gt; res.json())
    .then((projects) =&gt; setProjects(projects));
};
</code></pre>

            </section>
    



    
        <section >
            
            <h2>Cleaning up üßπ</h2>
<br>
<ul>
<li>
<p>There will be some code that is necessary to clean up after the component is no longer being mounted on the DOM. AKA turning off our side effects</p>
</li>
<li>
<p>Why? To avoid ‚Äòmemory leaks‚Äô which means using memory for data that is no longer necessary</p>
</li>
<li>
<p>Examples: Timeouts, subscriptions, event listeners</p>
</li>
<li>
<p>Happens on a couple of occasions:</p>
<ul>
<li>
<p>When the component initially mounts, it will run the cleanup function before the effect function inside <code>useEffect()</code></p>
</li>
<li>
<p>After a re-render but before the effect function runs again: if there is any cleanup defined, it will run this first</p>
</li>
</ul>
</li>
</ul>

            </section>
    



    
        <section >
            
            <h2>Cleanup example</h2>
<br>
<pre><code class="language-js">const Timer = () =&gt; {
  const [count, setCount] = useState(0);

  useEffect(() =&gt; {
    let timer = setTimeout(() =&gt; {
      setCount((count) =&gt; count + 1);
    }, 1000);

    return () =&gt; clearTimeout(timer);
  }, []);

  return &lt;h1&gt;I've rendered {count} times!&lt;/h1&gt;;
};
</code></pre>
<br>
<p>When the component unmounts from the DOM or mounts for the first time, it is ensured that the timeout has been cleared</p>

            </section>
    



    
        <section >
            
            <h2>üí° Conclusion</h2>
<br>
<p>Side effects are essential parts of a components functionality but not necessarily an action that needs to parttake in the rendering of the component. These are ‚Äòeffects‚Äô that are going to happen after the component has rendered to the DOM. We can utilize the built in React hook <code>useEffect()</code> to indicate what actions we would like to run after our component has rendered. There are a few ways to set rules on when these effects should occur by using the dependency array which is the optional second argument provided to the <code>useEffect()</code> hook.</p>
<br>
            </section>
    


    </div>


  </div>

  <div class="line top"></div>
  <div class="line bottom"></div>
  <div class="line left"></div>
  <div class="line right"></div>

  <script src="libs/reveal.js/4.3.1/reveal.js"></script>
<script src="libs/reveal.js/4.3.1/plugin/notes/notes.js"></script>
<script src="libs/reveal.js/4.3.1/plugin/markdown/markdown.js"></script>
<script src="libs/reveal.js/4.3.1/plugin/highlight/highlight.js"></script>
<script src="libs/reveal.js/4.3.1/plugin/math/math.js"></script>
<script src="libs/reveal.js/4.3.1/plugin/fullscreen/plugin.js"></script>
<script src="libs/reveal.js/4.3.1/plugin/animate/plugin.js"></script>
<script src="libs/reveal.js/4.3.1/plugin/animate/svg.min.js"></script>
<script src="libs/reveal.js/4.3.1/plugin/anything/plugin.js"></script>
<script src="libs/reveal.js/4.3.1/plugin/anything/Chart.min.js"></script>
<script src="libs/reveal.js/4.3.1/plugin/anything/d3/d3.v3.min.js"></script>
<script src="libs/reveal.js/4.3.1/plugin/anything/d3.patch.js"></script>
<script src="libs/reveal.js/4.3.1/plugin/anything/d3/queue.v1.min.js"></script>
<script src="libs/reveal.js/4.3.1/plugin/anything/d3/topojson.v1.min.js"></script>
<script src="libs/reveal.js/4.3.1/plugin/anything/function-plot.js"></script>
<script src="libs/reveal.js/4.3.1/plugin/customcontrols/plugin.js"></script>
<script src="libs/reveal.js/4.3.1/plugin/embed-tweet/plugin.js"></script>
<script src="libs/reveal.js/4.3.1/plugin/chart/chart.min.js"></script>
<script src="libs/reveal.js/4.3.1/plugin/chart/plugin.js"></script>
<script src="libs/reveal.js/4.3.1/plugin/verticator/verticator.js"></script>

<script src="libs/reveal.js/4.3.1/plugin/zoom/zoom.js"></script>
<script src="libs/reveal.js/4.3.1/plugin/search/search.js"></script>
<script src="libs/reveal.js/4.3.1/plugin/menu/menu.js"></script>
<script src="libs/reveal.js/4.3.1/plugin/chalkboard/plugin.js"></script>

<!--	<script src="libs/reveal.js/4.3.1/plugin/audio-slideshow/plugin.js"></script>  -->
<!--	<script src="libs/reveal.js/4.3.1/plugin/audio-slideshow/recorder.js"></script>-->
<!--	<script src="libs/reveal.js/4.3.1/plugin/audio-slideshow/RecordRTC.js"></script>-->

  

<script>
  const printPlugins = [
      RevealNotes,
      RevealHighlight,
      RevealMath.MathJax3,
      RevealAnimate,
      RevealChalkboard, 
			RevealEmbedTweet,
			RevealChart,
		];

		const plugins =  [...printPlugins,
		RevealZoom, 
		RevealSearch, 
				RevealMarkdown, 
				RevealMenu, 
				RevealFullscreen,
				RevealAnything,
				//RevealAudioSlideshow,
				//RevealAudioRecorder,
				RevealCustomControls, 
				// poll
				// question
				// seminar
				Verticator 
				 ]


		// Also available as an ES module, see:
		// https://revealjs.com/initialization/
		Reveal.initialize({
			controls: true,
      controlsTutorial: true,
      controlsLayout: 'bottom-right',
      controlsBackArrows: 'faded',
      progress: true,
      slideNumber: false,
      //#showSlideNumber "all" "print" "speaker"
      hash: true, //# hash: false,
      //# respondToHashChanges: true,
      //# history: false,
      keyboard: true,
      //#keyboardCondition: null,
      overview: true,
      center: true,
      touch: false,
      loop: false,
      rtl: false,
      //#navigationMode: 'default', linear grid
      shuffle: false,
      fragments: true,
      fragmentInURL: false,
      embedded: false,
      help: true,
      //#pause: true
      showNotes: false,
      autoPlayMedia: false, // TODO fix this to a nullable value
      //#preloadIframes: null. true false
      //#autoAnimate: true
      //#autoAnimateMatcher: null,
      //#autoAnimateEasing: 'ease',
      //autoAnimateDuration: 1.0,
      //#autoAnimateUnmatched: true
      //#autoAnimateStyles: []
      autoSlide: 0, // TODO fix this to a falseable value
      autoSlideStoppable: true,
      autoSlideMethod: '0',
      defaultTiming: 120,
      mouseWheel: false,
      //#previewLinks: false
      //#postMessage: true, // TODO : this can cause issues with the vscode api ???
      //#postMessageEvents: false,
      //#focusBodyOnPageVisibilityChange: true,
      transition: 'slide',
      transitionSpeed: 'default',
      backgroundTransition: 'fade',
      //#pdfMaxPagesPerSlide: Number.POSITIVE_INFINITY,
      //#pdfSeparateFragments: true,
      //#pdfPageHeightOffset: -1,
      viewDistance: 3,
      //#mobileViewDistance: 2,
      display: 'block',
      //#hideInactiveCursor: true,
      //#hideCursorTime: 5000

      // Parallax Background
      parallaxBackgroundImage: '',
      parallaxBackgroundSize: '',
      parallaxBackgroundHorizontal: 0,
      parallaxBackgroundVertical: 0,

      //Presentation Size
      width: 960,
			height: 700,
			margin: 0.04,
      minScale: 0.2,
      maxScale: 2,
      disableLayout: false,

      audio: {
        prefix: 'audio/', // audio files are stored in the "audio" folder
        suffix: '.ogg', // audio files have the ".ogg" ending
        textToSpeechURL: null, // the URL to the text to speech converter
        defaultNotes: false, // use slide notes as default for the text to speech converter
        defaultText: false, // use slide text as default for the text to speech converter
        advance: 0, // advance to next slide after given time in milliseconds after audio has played, use negative value to not advance
        autoplay: false, // automatically start slideshow
        defaultDuration: 5, // default duration in seconds if no audio is available
        defaultAudios: true, // try to play audios with names such as audio/1.2.ogg
        playerOpacity: 0.05, // opacity value of audio player if unfocused
        playerStyle: 'position: fixed; bottom: 4px; left: 25%; width: 50%; height:75px; z-index: 33;', // style used for container of audio controls
        startAtFragment: false, // when moving to a slide, start at the current fragment or at the start of the slide
      },
      
      chalkboard: { // font-awesome.min.css must be available
        //src: "chalkboard/chalkboard.json",
        storage: "chalkboard-demo",
      },
      
			customcontrols: {
					controls: [
      						{
						  id: 'toggle-overview',
						  title: 'Toggle overview (O)',
						  icon: '<i class="fa fa-th"></i>',
						  action: 'Reveal.toggleOverview();'
						}
						,
      {
        icon: '<i class="fa fa-pen-square"></i>',
        title: 'Toggle chalkboard (B)',
        action: 'RevealChalkboard.toggleChalkboard();'
      },
      {
        icon: '<i class="fa fa-pen"></i>',
        title: 'Toggle notes canvas (C)',
        action: 'RevealChalkboard.toggleNotesCanvas();'
      }
      
				]
			},
			chart: {
					defaults: { 
						color: 'lightgray', // color of labels
						scale: { 
							beginAtZero: true, 
							ticks: { stepSize: 1 },
							grid: { color: "lightgray" } , // color of grid lines
						},
					},
					line: { borderColor: [ "rgba(20,220,220,.8)" , "rgba(220,120,120,.8)", "rgba(20,120,220,.8)" ], "borderDash": [ [5,10], [0,0] ] }, 
					bar: { backgroundColor: [ "rgba(20,220,220,.8)" , "rgba(220,120,120,.8)", "rgba(20,120,220,.8)" ]}, 
					pie: { backgroundColor: [ ["rgba(0,0,0,.8)" , "rgba(220,20,20,.8)", "rgba(20,220,20,.8)", "rgba(220,220,20,.8)", "rgba(20,20,220,.8)"] ]},
					radar: { borderColor: [ "rgba(20,220,220,.8)" , "rgba(220,120,120,.8)", "rgba(20,120,220,.8)" ]}, 
			},
			math: {
				mathjax: 'https://cdn.jsdelivr.net/gh/mathjax/mathjax@2.7.8/MathJax.js',
				config: 'TeX-AMS_HTML-full',
				// pass other options into `MathJax.Hub.Config()`
				TeX: { Macros: { RR: "{\\bf R}" } }
				},
				anything: [ 
				{
		className: "plot",
		defaults: {width:500, height: 500, grid:true},
		initialize: (function(container, options){ options.target = "#"+container.id; functionPlot(options) })
	 },
	 {
		className: "chart",  
		initialize: (function(container, options){ container.chart = new Chart(container.getContext("2d"), options);  })
	 },
	 {
		className: "anything",
		initialize: (function(container, options){ if (options && options.initialize) { options.initialize(container)} })
	 },
					],
			// Learn about plugins: https://revealjs.com/plugins/
			plugins: (window.location.search.match(/print-pdf/gi) ? printPlugins : plugins ) 
		});
			


	    // Change chalkboard theme : 
		function changeTheme(input) {
			var config = {};
			config.theme = input.value;
			Reveal.getPlugin("RevealChalkboard").configure(config);
			input.blur();
		}

		// // Handle the message inside the webview
        // window.addEventListener('message', event => {

        //     const message = event.data; // The JSON data our extension sent

        //     switch (message.command) {
        //         case 'refactor':
        //             Reveal.toggleHelp();
        //     }
        // });

		if (window.location.search.match(/print-pdf-now/gi)) {
      		setTimeout(() => {
				window.print();
			  }, 2500);
			
    }
</script>

</body>

</html>